<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="{{url_for('static', filename='app.css')}}">

    <title>Fstick</title>
    <meta name="keywords" content="Diario">
    <meta name="description" content="Caderno virtual para registrar seus pensamentos e tarefas.">
    <meta name="author" content="FÃ¡bio Varela">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
</head>

<body>
    {% include 'nav.html' %}

    {% with messages = get_flashed_messages() %}

    {% if messages %}

    {% for msg in messages %}
    <div id="msg">{{msg}}</div>
    {% endfor %}

    {% endif %}

    {% block content %}
    {% endblock %}

    {% endwith %}

    {% include 'footer.html' %}
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script src="{{url_for('static', filename='app.js')}}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>
    <script>hljs.highlightAll();</script>
    <script>


        let input = document.querySelector('input')
        input.addEventListener('input', async function () {
            let response = await fetch('/search?q=' + input.value)
            let posts = await response.json()
            //console.log(posts)    
            let html = ''
            for (let x in posts) {
                let title = posts[x].title.replace('<', '&lt;').replace('&', '&amp')
                html += '<h5 class="card-title">' + title + '</h5>'
                
            }
            document.getElementById('title').innerHTML = html
        })

        const all = document.getElementById('page').children

        Array.from(children).forEach(li => {
            li.remove()
            
        });
        all.remove()
    </script>
</body>

</html>